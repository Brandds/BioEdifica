# ========================================
# CONFIGURAÇÃO PARA PRODUÇÃO (RENDER)
# ========================================

# Porta do servidor (Render fornece via variável PORT)
server.port=${PORT:8080}

# CORS para produção
cors.allowed-origins=https://bioedifica.vercel.app,https://bioedifica.netlify.app,https://www.bioedifica.com,http://localhost:5173,http://localhost:3000

# ========================================
# POSTGRESQL (RENDER)
# ========================================
spring.datasource.url=jdbc:postgresql://dpg-d4af7fkhg0os738127rg-a.oregon-postgres.render.com:5432/bioedifica1
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.username=bioedifica1_user
spring.datasource.password=UzxZsr45P8G1S1EOvjA0KBzYf9TrBMjl
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# ========================================
# CONFIGURAÇÕES DE POOL DE CONEXÃO (RENDER)
# ========================================
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ========================================
# CONTROLE DE SCRIPTS SQL
# ========================================
# PRODUÇÃO: Apenas validar schema existente (não recriar tabelas)
spring.jpa.hibernate.ddl-auto=validate

# EXECUTAR SCRIPTS UMA ÚNICA VEZ (depois mudar para never)
spring.sql.init.mode=never
spring.sql.init.continue-on-error=true

# Permitir que scripts sejam executados após o Hibernate criar o schema
spring.jpa.defer-datasource-initialization=true

  # Define onde estão os scripts de dados (ordem alfabética: 00, 01, 02...)
spring.sql.init.data-locations=classpath:db/data/*.sql

# ========================================
# DESABILITAR RECURSOS DE DEV
# ========================================
# Desabilitar H2 Console
spring.h2.console.enabled=false

# ========================================
# LOGS (desabilitar em produção)
# ========================================
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN